function cargarMalla() { const contenedor = document.getElementById('malla'); const creditosObtenidos = document.getElementById('creditos-obtenidos');

let creditos = 0; const aprobados = JSON.parse(localStorage.getItem('aprobados')) || [];

const cursosPorSemestre = {}; cursos.forEach(curso => { if (!cursosPorSemestre[curso.semestre]) { cursosPorSemestre[curso.semestre] = []; } cursosPorSemestre[curso.semestre].push(curso); });

for (const [semestre, cursosDelSemestre] of Object.entries(cursosPorSemestre)) { const columna = document.createElement('div'); columna.classList.add('semestre', semestre-${semestre});

const titulo = document.createElement('h2');
titulo.textContent = `Semestre ${semestre}`;
columna.appendChild(titulo);

cursosDelSemestre.forEach(curso => {
  const div = document.createElement('div');
  div.classList.add('curso');
  div.dataset.codigo = curso.codigo;

  const cumple = curso.prerrequisitos.every(c => aprobados.includes(c));

  if (!cumple) {
    div.classList.add('bloqueado');
  } else if (aprobados.includes(curso.codigo)) {
    div.classList.add('aprobado');
    creditos += curso.creditos;
  }

  div.innerHTML = `
    <div class="creditos">${curso.creditos} CR</div>
    ${curso.nombre}
  `;

  if (cumple) {
    div.addEventListener('click', () => {
      if (!aprobados.includes(curso.codigo)) {
        aprobados.push(curso.codigo);
      } else {
        const index = aprobados.indexOf(curso.codigo);
        aprobados.splice(index, 1);
      }
      localStorage.setItem('aprobados', JSON.stringify(aprobados));
      location.reload();
    });
  }

  columna.appendChild(div);
});

contenedor.appendChild(columna);

}

creditosObtenidos.textContent = creditos; }

document.addEventListener('DOMContentLoaded', cargarMalla);
